{"ast":null,"code":"import _regeneratorRuntime from\"/Users/siarradjabi/Documents/GitHub/sokar/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/siarradjabi/Documents/GitHub/sokar/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/siarradjabi/Documents/GitHub/sokar/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/siarradjabi/Documents/GitHub/sokar/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/siarradjabi/Documents/GitHub/sokar/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useUserSession}from'./UserSession';import InputTextField from'./inputTextField';import LinkButton from'./linkButton';import{useNavigate}from'react-router-dom';import'./stylesFiles/mobileView/mobileLoginForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var _useUserSession=useUserSession(),userSession=_useUserSession.userSession,setUserSession=_useUserSession.setUserSession;var navigate=useNavigate();var _useState=useState({userName:'',password:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var property,response,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(userSession!==null)){_context.next=4;break;}alert(\"You are already logged in.\");return _context.abrupt(\"return\");case 4:_context.t0=_regeneratorRuntime().keys(formData);case 5:if((_context.t1=_context.t0()).done){_context.next=12;break;}property=_context.t1.value;if(!(formData[property]==='')){_context.next=10;break;}alert('Please fill all the fields.');return _context.abrupt(\"return\");case 10:_context.next=5;break;case 12:_context.next=14;return fetch('http://localhost:9000/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData),credentials:'include'});case 14:response=_context.sent;if(!response.ok){_context.next=25;break;}_context.next=18;return response.json();case 18:user=_context.sent;localStorage.setItem('userSession',JSON.stringify(user));setUserSession(user);alert(\"Login successful! Welcome, \".concat(user.username,\". You are logged in as a \").concat(user.role,\".\"));navigate(\"/\");_context.next=26;break;case 25:alert('An error occurred while login. Please retry');case 26:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"formContainer\",style:{paddingLeft:\"25%\",paddingRight:\"25%\",paddingBottom:\"5%\"},children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{background:\"rgba( 255, 255, 255, 0.1 )\",boxShadow:\"0 8px 32px 0 rgba( 31, 38, 135, 0.37 )\",backdropFilter:\"blur( 5px )\",borderRadius:\"10px\",border:\"1px solid rgba( 255, 255, 255, 0.18 )\",marginTop:\"10%\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\",color:\"white\",marginTop:\"5%\"},children:\"Login Here\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{listStyleType:\"none\",textAlign:\"center\",paddingBottom:\"5%\",paddingLeft:\"5%\",paddingRight:\"5%\"},children:[/*#__PURE__*/_jsx(\"li\",{style:{position:\"relative\",marginTop:\"10%\"},children:/*#__PURE__*/_jsx(InputTextField,{name:\"userName\",onChange:handleChange,type:\"text\",label:\"Username\"})}),/*#__PURE__*/_jsx(\"li\",{style:{position:\"relative\",marginTop:\"10%\"},children:/*#__PURE__*/_jsx(InputTextField,{name:\"password\",onChange:handleChange,type:\"password\",label:\"Password\"})}),/*#__PURE__*/_jsx(\"li\",{style:{marginTop:\"10%\"},children:/*#__PURE__*/_jsx(\"input\",{className:\"submit_button\",type:\"submit\",value:\"Login\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"10%\"},children:/*#__PURE__*/_jsxs(\"p\",{className:\"loginText\",style:{fontSize:\"25px\",color:\"white\"},children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(LinkButton,{style:{marginTop:\"5%\"},link:\"/createAccount\",buttonText:\"Create account\"})]})})]})});};export default LoginForm;","map":{"version":3,"names":["React","useState","useUserSession","InputTextField","LinkButton","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginForm","_useUserSession","userSession","setUserSession","navigate","_useState","userName","password","_useState2","_slicedToArray","formData","setFormData","handleChange","e","_objectSpread","_defineProperty","target","name","value","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","property","response","user","wrap","_callee$","_context","prev","next","preventDefault","alert","abrupt","t0","keys","t1","done","fetch","method","headers","body","JSON","stringify","credentials","sent","ok","json","localStorage","setItem","concat","username","role","stop","_x","apply","arguments","children","className","style","paddingLeft","paddingRight","paddingBottom","onSubmit","background","boxShadow","backdropFilter","borderRadius","border","marginTop","textAlign","color","listStyleType","position","onChange","type","label","fontSize","link","buttonText"],"sources":["/Users/siarradjabi/Documents/GitHub/sokar/client/src/components/loginForm.js"],"sourcesContent":["import React, {useState} from 'react';\nimport { useUserSession } from './UserSession';\nimport InputTextField from './inputTextField';\nimport LinkButton from './linkButton';\nimport { useNavigate } from 'react-router-dom';\nimport './stylesFiles/mobileView/mobileLoginForm.css';\n\nconst LoginForm = () => {\n    const { userSession, setUserSession } = useUserSession();\n    const navigate = useNavigate();\n    const [formData, setFormData] = useState({\n        userName:'',\n        password: ''\n    });\n\n    const handleChange = (e) => {\n        setFormData({\n            ...formData,\n            [e.target.name]: e.target.value\n        });\n    }\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n\n        if(userSession !== null) {\n            alert(\"You are already logged in.\");\n            return;\n        }\n\n        for (let property in formData) {\n            if (formData[property] === '') {\n                alert('Please fill all the fields.');\n                return;\n            }\n        }\n\n        const response = await fetch('http://localhost:9000/login', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(formData),\n            credentials: 'include'\n        });\n\n        if (response.ok) {\n            const user = await response.json();\n            localStorage.setItem('userSession', JSON.stringify(user));\n            setUserSession(user);\n            alert(`Login successful! Welcome, ${user.username}. You are logged in as a ${user.role}.`);\n            navigate(\"/\");\n        } else {\n            alert('An error occurred while login. Please retry');\n        }\n    }\n\n\n    return (\n        <div>\n            <div className=\"formContainer\" style={{paddingLeft:\"25%\",paddingRight:\"25%\",paddingBottom:\"5%\",}}>\n                <form onSubmit={handleSubmit} style={{background: \"rgba( 255, 255, 255, 0.1 )\", boxShadow: \"0 8px 32px 0 rgba( 31, 38, 135, 0.37 )\",\n                    backdropFilter: \"blur( 5px )\", borderRadius: \"10px\", border: \"1px solid rgba( 255, 255, 255, 0.18 )\",\n                    marginTop:\"10%\"}}>\n                    <h1 style={{textAlign:\"center\", color:\"white\", marginTop:\"5%\"}}>Login Here</h1>\n                    <ul style={{listStyleType:\"none\", textAlign:\"center\", paddingBottom:\"5%\", paddingLeft:\"5%\", paddingRight:\"5%\"}}>\n                        <li style={{position: \"relative\", marginTop:\"10%\"}}>\n                            <InputTextField name=\"userName\" onChange={handleChange} type=\"text\" label=\"Username\"></InputTextField>\n                        </li>\n                        <li style={{position: \"relative\", marginTop:\"10%\"}}>\n                            <InputTextField name=\"password\" onChange={handleChange} type=\"password\" label=\"Password\"></InputTextField>\n                        </li>\n                        <li style={{marginTop:\"10%\"}}>\n                            <input className=\"submit_button\" type=\"submit\" value=\"Login\"/>\n                        </li>\n                    </ul>\n                </form>\n                <div style={{marginTop:\"10%\"}}>\n                    <p className=\"loginText\" style={{fontSize:\"25px\", color:\"white\"}}>Don't have an account? <br/><br/><LinkButton style={{marginTop:\"5%\"}} link=\"/createAccount\" buttonText=\"Create account\"/></p>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}